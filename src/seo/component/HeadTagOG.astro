---
import { SEO } from "astro-seo";

interface Props {
  description?: {
    title?: string,
    containsArticle?: boolean,
    description?: string,
    previewImage?: string,
    datePublished?: string,
    dateModified?: string,
    author?: string[]|string,
    topics?: string[],
    mentionedKeywords?: string[],
  },
}

const { description } = Astro.props as Props;
const desc = description || {};
---
<SEO
  description={desc.description}
  openGraph={{
    basic:{
      url: Astro.url.origin,
      type: desc.containsArticle ? "article" : "website",
      title: desc.title || "No Title",
      image: desc.previewImage || `${Astro.url.origin}/images/generic-preview-page.png`,
    },
    optional:{
      description: desc?.description,
    },
    image: desc.previewImage ? {
      url: desc.previewImage,
      alt: desc.title,
    } : undefined,
    article: desc.containsArticle ? {
      publishedTime: desc.datePublished,
      modifiedTime: desc.dateModified,
      expirationTime: undefined,
      authors: desc.author ? (Array.isArray(desc.author) ? desc.author : [desc.author]) : undefined,
      section: desc.topics?.[0] || undefined,
      tags: desc.mentionedKeywords,
    } : undefined,
  }}
/>